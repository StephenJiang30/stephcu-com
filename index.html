<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stephcu</title>
<link rel="icon" href="https://cdn.nba.com/teams/uploads/sites/1610612744/2022/06/gsw-logo-1920.png">

<style>
:root {
  --trans-smooth: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  --glass: blur(24px) saturate(160%);
}

/* ===== 昼夜氛围主题 ===== */
html[data-theme="light"] {
  --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  --bg-overlay: rgba(255, 255, 255, 0.25);
  --card: rgba(255, 255, 255, 0.4);
  --card-hover: rgba(255, 255, 255, 0.7);
  --border: rgba(0, 0, 0, 0.05);
  --text: #1d1d1f;
  --input-bg: rgba(255, 255, 255, 0.5);
  --engine-active: rgba(0, 0, 0, 0.08);
}
html[data-theme="dark"] {
  --bg-gradient: linear-gradient(160deg, #0f172a 0%, #020617 100%);
  --bg-overlay: rgba(0, 0, 0, 0.3);
  --card: rgba(30, 41, 59, 0.4);
  --card-hover: rgba(51, 65, 85, 0.6);
  --border: rgba(255, 255, 255, 0.1);
  --text: #f1f5f9;
  --input-bg: rgba(255, 255, 255, 0.1);
  --engine-active: rgba(255, 255, 255, 0.15);
}

* { box-sizing: border-box; outline: none; }
body {
  margin: 0; min-height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
  color: var(--text);
  display: flex; justify-content: center; align-items: flex-start;
  transition: var(--trans-smooth);
  background: var(--bg-gradient);
  padding-top: 6vh;
}

.overlay {
  position: fixed; inset: 0; z-index: -1;
  background: var(--bg-overlay);
  backdrop-filter: var(--glass);
  -webkit-backdrop-filter: var(--glass);
  transition: var(--trans-smooth);
}

.wrap { width: 100%; max-width: 1100px; padding: 0 40px 60px; }

/* 头部 */
.header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
.brand { display: flex; gap: 16px; align-items: center; }
.logo { width: 52px; height: 52px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
.logo img { width: 100%; height: 100%; object-fit: cover; border-radius: 12px; }
.title h1 { margin: 0; font-size: 24px; font-weight: 700; letter-spacing: -0.5px;}
.title span { font-size: 13px; opacity: 0.5; }

/* 搜索框与引擎选择 */
.search-container {
  display: flex; flex-direction: column; align-items: center; gap: 16px; margin-bottom: 50px;
}
.search-wrapper {
  display: flex; align-items: center; background: var(--card); 
  padding: 6px; border-radius: 32px; border: 1px solid var(--border);
  backdrop-filter: var(--glass); -webkit-backdrop-filter: var(--glass);
  width: 100%; max-width: 680px; box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}
.engine-selector {
  display: flex; padding-left: 8px; gap: 4px;
}
.engine-btn {
  width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; 
  justify-content: center; cursor: pointer; transition: 0.3s; border: none; background: transparent;
}
.engine-btn img { width: 20px; height: 20px; filter: grayscale(0.2); transition: 0.3s; }
.engine-btn.active { background: var(--engine-active); }
.engine-btn.active img { filter: grayscale(0); transform: scale(1.1); }
.engine-btn:hover:not(.active) { background: var(--engine-active); opacity: 0.8; }

.search-form { flex: 1; position: relative; display: flex; align-items: center; }
.search-form input {
  width: 100%; padding: 12px 20px; font-size: 16px; border: none;
  background: transparent; color: var(--text);
}

/* 控制按钮 */
.controls button {
  width: 44px; height: 44px; border-radius: 50%;
  border: 1px solid var(--border); background: var(--card);
  color: var(--text); cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.controls button:hover { transform: scale(1.1); background: var(--card-hover); }

/* 网格 */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
}

.tile {
  display: flex; align-items: center; gap: 14px;
  padding: 16px; border-radius: 22px;
  background: var(--card);
  border: 1px solid var(--border);
  cursor: pointer;
  transition: all 0.3s ease;
}
.tile:hover {
  transform: translateY(-5px);
  background: var(--card-hover);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.icon-box {
  width: 48px; height: 48px; border-radius: 12px;
  background: white; 
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}
.icon-box img { width: 30px; height: 30px; object-fit: contain; }

.name { font-size: 15px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* 动画 */
.theme-icon { width: 22px; height: 22px; transition: 0.4s; }
.theme-out { transform: scale(0) rotate(-90deg); opacity: 0; }
</style>
</head>

<body>
<div class="overlay"></div>

<div class="wrap">
  <div class="header">
    <div class="brand">
      <div class="logo"><img src="https://cdn.nba.com/teams/uploads/sites/1610612744/2022/06/gsw-logo-1920.png"></div>
      <div class="title">
        <h1>Stephcu</h1>
        <span>Quick Links · 快速入口</span>
      </div>
    </div>
    <div class="controls"><button id="themeBtn"></button></div>
  </div>

  <div class="search-container">
    <div class="search-wrapper">
      <div class="engine-selector">
        <button class="engine-btn active" data-engine="google" title="Google 搜索">
          <img src="https://www.google.com/favicon.ico">
        </button>
        <button class="engine-btn" data-engine="bing" title="Bing 搜索">
          <img src="https://www.bing.com/favicon.ico">
        </button>
        <button class="engine-btn" data-engine="baidu" title="百度搜索">
          <img src="https://www.baidu.com/favicon.ico">
        </button>
      </div>
      <form class="search-form" id="searchForm" action="https://www.bing.com/search" method="get" target="_blank">
        <input type="text" name="q" id="searchInput" placeholder="Bing" autocomplete="off">
      </form>
    </div>
  </div>

  <div id="grid" class="grid"></div>
</div>

<script>
const root = document.documentElement;
const themeBtn = document.getElementById("themeBtn");

const getIcon = (url) => {
  try {
    const domain = new URL(url).hostname;
    return `https://api.iowen.cn/favicon/${domain}.png`;
  } catch(e) { return ''; }
};

// 引擎配置
const engines = {
  google: { action: "https://www.google.com/search", name: "Google", placeholder: "Google" },
  bing: { action: "https://www.bing.com/search", name: "Bing", placeholder: "Bing" },
  baidu: { action: "https://www.baidu.com/s", name: "wd", placeholder: "Baidu" }
};

const sun = `<svg class="theme-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>`;
const moon = `<svg class="theme-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>`;

function applyTheme(t) {
  root.dataset.theme = t;
  themeBtn.innerHTML = (t === "dark" ? moon : sun);
}

// 初始化主题
const hour = new Date().getHours();
const auto = (hour >= 6 && hour < 18) ? "light" : "dark";
applyTheme(localStorage.getItem("theme") || auto);

themeBtn.onclick = () => {
  const target = root.dataset.theme === "dark" ? "light" : "dark";
  themeBtn.firstElementChild.classList.add("theme-out");
  setTimeout(() => {
    applyTheme(target);
    localStorage.setItem("theme", target);
  }, 200);
};

// 引擎切换逻辑
const engineBtns = document.querySelectorAll('.engine-btn');
const searchForm = document.getElementById('searchForm');
const searchInput = document.getElementById('searchInput');

engineBtns.forEach(btn => {
  btn.onclick = () => {
    const type = btn.dataset.engine;
    engineBtns.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    
    const config = engines[type];
    searchForm.action = config.action;
    searchInput.placeholder = config.placeholder;
    // 百度使用 wd 作为搜索参数名，其他用 q
    searchInput.name = (type === 'baidu' ? 'wd' : 'q');
  };
});

/* ===== 站点配置 (已删除 Bing 卡片) ===== */
const sites = [
  ["Google", "https://www.google.com"],
  ["ChatGPT", "https://chatgpt.com"],
  ["Gemini", "https://gemini.google.com"],
  ["GitHub", "https://github.com"],
  ["YouTube", "https://www.youtube.com"],
  ["Apple Music", "https://music.apple.com/cn/browse"],
  ["Internet Archive", "https://archive.org"],
  ["Bilibili", "https://www.bilibili.com"],
  ["抖音", "https://www.douyin.com"],
  ["中国知网", "https://www.cnki.net"],
  ["科研工具", "https://www.yanweb.top/"],
  ["汉典", "https://www.zdic.net"],
  ["识典古籍", "https://www.shidianguji.com/zh"],
  ["数字广大", "https://webvpn.gzhu.edu.cn/https/77726476706e69737468656265737421fef256913e7e6f4a761dc7a99c406d36d9/up/view?m=up#act=portal/viewhome"]
];

const grid = document.getElementById("grid");
sites.forEach(([n, u]) => {
  const div = document.createElement("div");
  div.className = "tile";
  div.onclick = () => window.open(u, '_blank');
  const fallbackIcon = `https://favicon.rss.ink/v1/${btoa(u).replace(/=/g, '')}`;

  div.innerHTML = `
    <div class="icon-box">
      <img src="${getIcon(u)}" onerror="this.src='${fallbackIcon}';this.onerror=null;">
    </div>
    <div class="name">${n}</div>
  `;
  grid.appendChild(div);
});
</script>
</body>
</html>
